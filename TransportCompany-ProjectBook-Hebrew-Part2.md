## 5. תיעוד ה-API

### 5.1 נקודות קצה לאימות

#### רישום משתמש
- **כתובת**: `/api/auth/register`
- **שיטה**: `POST`
- **גוף הבקשה**:
  ```json
  {
    "username": "מחרוזת",
    "email": "מחרוזת",
    "password": "מחרוזת",
    "role": "company|driver"
  }
  ```
- **תגובה**: אובייקט משתמש עם טוקן

#### התחברות
- **כתובת**: `/api/auth/login`
- **שיטה**: `POST`
- **גוף הבקשה**:
  ```json
  {
    "email": "מחרוזת",
    "password": "מחרוזת"
  }
  ```
- **תגובה**: אובייקט משתמש עם טוקן

### 5.2 נקודות קצה לחברה

#### עדכון פרופיל
- **כתובת**: `/api/company/profile`
- **שיטה**: `PUT`
- **אימות**: נדרש (חברה)
- **גוף הבקשה**:
  ```json
  {
    "company_name": "מחרוזת",
    "contact_person": "מחרוזת",
    "phone": "מחרוזת",
    "address": "מחרוזת",
    "description": "מחרוזת"
  }
  ```
- **תגובה**: הודעת הצלחה

#### קבלת פרופיל
- **כתובת**: `/api/company/profile`
- **שיטה**: `GET`
- **אימות**: נדרש (חברה)
- **תגובה**: אובייקט פרופיל חברה

#### יצירת נסיעה
- **כתובת**: `/api/company/trips`
- **שיטה**: `POST`
- **אימות**: נדרש (חברה)
- **גוף הבקשה**:
  ```json
  {
    "pickup_location": "מחרוזת",
    "destination": "מחרוזת",
    "trip_date": "YYYY-MM-DD",
    "departure_time": "HH:MM:SS",
    "passenger_count": "מספר",
    "vehicle_type": "8|14|19",
    "company_price": "מספר",
    "driver_price": "מספר",
    "visa_number": "מחרוזת",
    "special_instructions": "מחרוזת"
  }
  ```
- **תגובה**: מזהה נסיעה והודעת הצלחה

#### קבלת נסיעות
- **כתובת**: `/api/company/trips`
- **שיטה**: `GET`
- **אימות**: נדרש (חברה)
- **תגובה**: מערך של אובייקטי נסיעה

### 5.3 נקודות קצה לנהג

#### עדכון פרופיל
- **כתובת**: `/api/driver/profile`
- **שיטה**: `PUT`
- **אימות**: נדרש (נהג)
- **גוף הבקשה**:
  ```json
  {
    "first_name": "מחרוזת",
    "last_name": "מחרוזת",
    "phone": "מחרוזת",
    "address": "מחרוזת",
    "license_number": "מחרוזת",
    "license_expiry": "YYYY-MM-DD",
    "vehicle_type": "8|14|19",
    "vehicle_plate": "מחרוזת"
  }
  ```
- **תגובה**: הודעת הצלחה

#### עדכון זמינות
- **כתובת**: `/api/driver/availability`
- **שיטה**: `PUT`
- **אימות**: נדרש (נהג)
- **גוף הבקשה**:
  ```json
  {
    "available_from": "YYYY-MM-DD HH:MM:SS",
    "available_to": "YYYY-MM-DD HH:MM:SS",
    "current_location": "מחרוזת"
  }
  ```
- **תגובה**: הודעת הצלחה

#### קבלת נסיעות זמינות
- **כתובת**: `/api/driver/available-trips`
- **שיטה**: `GET`
- **אימות**: נדרש (נהג)
- **תגובה**: מערך של אובייקטי נסיעה זמינים

### 5.4 נקודות קצה למנהל מערכת

#### קבלת אישורים ממתינים
- **כתובת**: `/api/admin/pending-approvals`
- **שיטה**: `GET`
- **אימות**: נדרש (מנהל)
- **תגובה**: מערך של אובייקטי משתמש ממתינים

#### אישור משתמש
- **כתובת**: `/api/admin/users/:id/approve`
- **שיטה**: `PUT`
- **אימות**: נדרש (מנהל)
- **תגובה**: הודעת הצלחה

#### דחיית משתמש
- **כתובת**: `/api/admin/users/:id/reject`
- **שיטה**: `DELETE`
- **אימות**: נדרש (מנהל)
- **תגובה**: הודעת הצלחה

### 5.5 נקודות קצה לבקשות נסיעה

#### שליחת בקשת נהג
- **כתובת**: `/api/company/trips/:tripId/request/:driverId`
- **שיטה**: `POST`
- **אימות**: נדרש (חברה)
- **תגובה**: מזהה בקשה והודעת הצלחה

#### קבלת בקשת נסיעה
- **כתובת**: `/api/driver/trip-requests/:requestId/accept`
- **שיטה**: `PUT`
- **אימות**: נדרש (נהג)
- **תגובה**: הודעת הצלחה

#### דחיית בקשת נסיעה
- **כתובת**: `/api/driver/trip-requests/:requestId/reject`
- **שיטה**: `PUT`
- **אימות**: נדרש (נהג)
- **תגובה**: הודעת הצלחה

## 6. ממשק משתמש

### 6.1 תרשימי זרימת משתמש

#### זרימת משתמש חברה
```
התחברות/הרשמה → לוח מחוונים → יצירת נסיעה → צפייה בנסיעות → 
שליחת בקשות לנהגים → ניהול בקשות נסיעה → צפייה בפרטי נסיעה →
דירוג נהג → צפייה בדוחות
```

#### זרימת משתמש נהג
```
התחברות/הרשמה → לוח מחוונים → עדכון זמינות → 
צפייה בנסיעות זמינות → צפייה בבקשות נסיעה → קבלה/דחייה של בקשות →
צפייה בנסיעות משויכות → עדכון סטטוס נסיעה → דירוג חברה → צפייה בדוחות
```

#### זרימת משתמש מנהל
```
התחברות → לוח מחוונים → צפייה באישורים ממתינים → אישור/דחיית משתמשים →
ניהול חברות → ניהול נהגים → צפייה בדוחות מערכת
```

### 6.2 רכיבי ממשק משתמש מרכזיים

#### ניווט
האפליקציה משתמשת בסרגל ניווט רספונסיבי עם פריטי תפריט מבוססי תפקיד:
- **אורח**: בית, התחברות, הרשמה
- **חברה**: לוח מחוונים, פרופיל, נסיעות, בקשות נסיעה, דוחות, התראות
- **נהג**: לוח מחוונים, פרופיל, זמינות, נסיעות, בקשות נסיעה, דוחות, התראות
- **מנהל**: לוח מחוונים, אישורים ממתינים, חברות, נהגים

#### לוח מחוונים
לכל תפקיד משתמש יש לוח מחוונים מותאם אישית המציג מידע רלוונטי:
- **חברה**: סטטיסטיקות נסיעה, נסיעות אחרונות, בקשות ממתינות
- **נהג**: נסיעות קרובות, נסיעות זמינות, הכנסות
- **מנהל**: סטטיסטיקות מערכת, הרשמות אחרונות, אישורים ממתינים

#### טפסים
האפליקציה כוללת טפסים שונים להזנת נתונים:
- טפסי הרשמה
- טפסי עדכון פרופיל
- טופס יצירת נסיעה
- טופס עדכון זמינות
- טופס דירוג

### 6.3 עיצוב רספונסיבי
הממשק נבנה עם React Bootstrap כדי להבטיח רספונסיביות בכל המכשירים:
- פריסה ידידותית למובייל
- טבלאות רספונסיביות
- ניווט מתקפל
- טפסים מותאמים לגדלי מסך שונים

### 6.4 צילומי מסך של הממשק
[הוסף כאן צילומי מסך של ממשקים מרכזיים]

## 7. בדיקות

### 7.1 אסטרטגיית בדיקות
האפליקציה מיישמת אסטרטגיית בדיקות מקיפה הכוללת:
- בדיקות יחידה לרכיבים ופונקציות בודדות
- בדיקות אינטגרציה לנקודות קצה של ה-API
- בדיקות קצה לקצה לתהליכי משתמש קריטיים

### 7.2 בדיקות יחידה
בדיקות יחידה נכתבות באמצעות Jest ומתמקדות בבדיקת:
- פונקציות בקר
- שיטות מודל
- פונקציות שירות
- רינדור של רכיבי React

דוגמה לבדיקת בקר:
```javascript
describe('בקר חברה', () => {
  describe('עדכון פרופיל', () => {
    it('צריך לעדכן פרופיל חברה בהצלחה', async () => {
      // נתוני דמה
      const mockCompany = { id: 1, user_id: 5, company_name: 'חברת בדיקה' };

      // מדמה את פונקציות המודל
      Company.findByUserId.mockResolvedValueOnce(mockCompany);
      Company.update.mockResolvedValueOnce(true);

      // יוצר בקשה ותגובה מדומות
      const { req, res } = createMockReqRes({
        user: { id: 5, role: 'company' },
        body: {
          company_name: 'חברה מעודכנת',
          contact_person: 'איש קשר מעודכן',
          phone: '111-222-3333',
          address: '456 רחוב מעודכן'
        }
      });

      // קורא לפונקציית הבקר
      await companyController.updateProfile(req, res);

      // בדיקות
      expect(Company.findByUserId).toHaveBeenCalledWith(5);
      expect(Company.update).toHaveBeenCalledWith(1, {
        company_name: 'חברה מעודכנת',
        contact_person: 'איש קשר מעודכן',
        phone: '111-222-3333',
        address: '456 רחוב מעודכן'
      });
      expect(res.json).toHaveBeenCalledWith({
        message: 'פרופיל החברה עודכן בהצלחה'
      });
    });
  });
});
```

### 7.3 בדיקות API
נקודות קצה של ה-API נבדקות כדי להבטיח שהן:
- מחזירות קודי סטטוס נכונים
- מאמתות נתוני קלט כראוי
- מיישמות אימות והרשאות כראוי
- מחזירות את פורמט התגובה הצפוי

### 7.4 כיסוי בדיקות
סוויטת הבדיקות שואפת להשיג כיסוי גבוה של:
- לוגיקה עסקית קריטית
- טיפול בשגיאות
- אימות והרשאות
- אימות נתונים

## 8. פריסה

### 8.1 ארכיטקטורת פריסה
האפליקציה מופצת באמצעות ארכיטקטורה תלת-שכבתית:
- צד לקוח: אירוח סטטי (למשל, Netlify, Vercel)
- צד שרת: שרת Node.js (למשל, Heroku, AWS EC2)
- מסד נתונים: מסד נתונים MySQL (למשל, AWS RDS, DigitalOcean)

### 8.2 תהליך פריסה
1. בניית אפליקציית צד לקוח React
2. פריסת צד הלקוח לשירות אירוח סטטי
3. הגדרת שרת Node.js בשרת
4. הגדרת מסד נתונים MySQL
5. הגדרת משתני סביבה למידע רגיש
6. הגדרת CORS לאפשר תקשורת בין צד הלקוח לשרת
7. הגדרת ניטור ורישום

### 8.3 תצורת סביבה
האפליקציה משתמשת במשתני סביבה לתצורה:
- פרטי התחברות למסד נתונים
- מפתח סודי JWT
- כתובות API
- פרטי התחברות לשירות דואר אלקטרוני
- תצורת רישום

### 8.4 שיקולי סקילביליות
האפליקציה מתוכננת עם סקילביליות בראש:
- שרת ללא מצב לסקילביליות אופקית
- מאגר חיבורים למסד נתונים
- מטמון לנתונים שנגישים לעתים קרובות
- שאילתות מותאמות לביצועים

## 9. שיפורים עתידיים

### 9.1 שיפורים לטווח קצר
- אפליקציית מובייל לנהגים
- מעקב מיקום בזמן אמת
- מערכת הודעות באפליקציה
- שילוב תשלומים
- העלאת מסמכים לאימות נהג

### 9.2 חזון לטווח ארוך
- אלגוריתם התאמת נסיעות מבוסס בינה מלאכותית
- ניתוח חיזוי לתחזית ביקושים
- אינטגרציה עם שירותי מיפוי
- תמיכה בריבוי שפות
- דיווח מתקדם ובינה עסקית

## 10. סיכום

מערכת ניהול חברת התחבורה מספקת פתרון מקיף לניהול שירותי תחבורה בין חברות ונהגים. המערכת מייעלת את תהליך יצירת הנסיעות, שיבוץ הנהגים וניהול הנסיעות, מה שמוביל ליעילות משופרת וחוויית משתמש טובה יותר.

האפליקציה מדגימה את השימוש בטכנולוגיות פיתוח אינטרנט מודרניות ועוקבת אחר שיטות עבודה מומלצות בארכיטקטורת תוכנה, אבטחה ועיצוב ממשק משתמש. העיצוב המודולרי מאפשר שיפורים עתידיים וסקילביליות ככל שבסיס המשתמשים גדל.

## 11. מקורות

- תיעוד React.js: https://reactjs.org/docs/getting-started.html
- תיעוד Node.js: https://nodejs.org/en/docs/
- תיעוד Express.js: https://expressjs.com/
- תיעוד MySQL: https://dev.mysql.com/doc/
- תיעוד React Bootstrap: https://react-bootstrap.github.io/
- אימות JWT: https://jwt.io/introduction/
- מסגרת בדיקות Jest: https://jestjs.io/docs/getting-started
